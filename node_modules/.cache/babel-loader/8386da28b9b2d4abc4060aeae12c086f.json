{"ast":null,"code":"import _defineProperty from\"/Users/tkak/sample/react2/my-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/tkak/sample/react2/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/tkak/sample/react2/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useMemo}from'react';import Movie from'./movie';import Button from'./button';import Filter from'./filter';import Select from'./select';import logo from'../images/logo.png';import arrow from'../images/arrow.png';var Sort=function Sort(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),sort=_useState2[0],setSort=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),filterQuery=_useState4[0],setFilterQuery=_useState4[1];var _useState5=useState([2019]),_useState6=_slicedToArray(_useState5,2),year=_useState6[0],setYear=_useState6[1];var sortedMovies=useMemo(function(){var _sortedMovies=props.movies[year][\"movies\"];//入力した文字は小文字にする\nvar filterTitle=filterQuery.title&&filterQuery.title.toLowerCase();//絞り込み検索\n_sortedMovies=_sortedMovies.filter(function(row){//タイトルで絞り込み\nif(filterQuery.title&&String(row.title).toLowerCase().indexOf(filterTitle)===-1){return false;}return row;});//ソート\nif(sort.key){_sortedMovies=_sortedMovies.sort(function(a,b){a=a[sort.key];b=b[sort.key];if(a===b){return 0;}if(a>b){return 1*sort.order;}if(a<b){return-1*sort.order;}});}return _sortedMovies;},[filterQuery,sort,year]);var handleFilter=function handleFilter(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFilterQuery(_objectSpread({},filterQuery,_defineProperty({},name,value)));};var handleSort=function handleSort(key){if(sort.key===key){setSort(_objectSpread({},sort,{order:-sort.order}));}else{setSort({key:key,order:1});}};var handleChange=function handleChange(event){setYear(event.target.value);};return React.createElement(\"div\",{id:\"top\"},React.createElement(\"div\",{className:\"header\",id:\"header\"},React.createElement(\"div\",{className:\"header-group\"},React.createElement(\"div\",{className:\"logo\"},React.createElement(\"a\",{href:\"\"},React.createElement(\"img\",{src:logo,alt:\"logo\"}))),React.createElement(\"div\",{className:\"header-link\"},React.createElement(\"a\",{href:\"\"},\"year\")),React.createElement(\"div\",{className:\"header-link\"},React.createElement(\"a\",{href:\"\"},\"all\")))),React.createElement(\"div\",{className:\"function\"},React.createElement(\"div\",{className:\"function-group\"},React.createElement(\"div\",{className:\"filter\"},React.createElement(Filter,{handleFilter:handleFilter,filterQuery:filterQuery,className:\"component-filter\"})),React.createElement(\"div\",{className:\"select function-items\"},React.createElement(Select,{year:year,handleChange:handleChange,className:\"component-select\"})),React.createElement(\"div\",{className:\"button function-items\"},React.createElement(Button,{button:\"income\",sort:sort,handleSort:handleSort,className:\"component-button\"})),React.createElement(\"div\",{className:\"function-items\"},React.createElement(\"a\",{href:\"#top\"},React.createElement(\"div\",{className:\"header-link\"},React.createElement(\"img\",{src:arrow,alt:\"arrow\"})))))),React.createElement(\"div\",{className:\"main\"},React.createElement(\"div\",{className:\"movielist\"},React.createElement(Movie,{movies:sortedMovies,max:props.movies[year][\"max\"],className:\"component-movie\"}))),React.createElement(\"div\",{className:\"footer\"}));};export default Sort;","map":{"version":3,"sources":["/Users/tkak/sample/react2/my-app/src/components/sort.js"],"names":["React","useState","useMemo","Movie","Button","Filter","Select","logo","arrow","Sort","props","sort","setSort","filterQuery","setFilterQuery","year","setYear","sortedMovies","_sortedMovies","movies","filterTitle","title","toLowerCase","filter","row","String","indexOf","key","a","b","order","handleFilter","e","target","name","value","handleSort","handleChange","event"],"mappings":"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","sourcesContent":["import React, { useState, useMemo } from 'react';\nimport Movie from './movie';\nimport Button from './button';\nimport Filter from './filter';\nimport Select from './select';\nimport logo from '../images/logo.png';\nimport arrow from '../images/arrow.png';\n\nconst Sort = (props) => {\n  const [sort, setSort] = useState([])\n  const [filterQuery, setFilterQuery] = useState({});\n  const [year, setYear] = useState([2019]);\n\n  const sortedMovies = useMemo(() => {\n    let _sortedMovies = props.movies[year][\"movies\"];\n\n    //入力した文字は小文字にする\n    const filterTitle = filterQuery.title && filterQuery.title.toLowerCase();\n\n    //絞り込み検索\n    _sortedMovies = _sortedMovies.filter(row => {\n      //タイトルで絞り込み\n      if (\n        filterQuery.title &&\n        String(row.title).toLowerCase().indexOf(filterTitle) === -1\n      ) {\n        return false;\n      }\n      return row;\n    });\n\n    //ソート\n    if (sort.key) {\n      _sortedMovies = _sortedMovies.sort((a, b) => {\n        a = a[sort.key];\n        b = b[sort.key];\n\n        if(a === b) {\n          return 0;\n        }\n        if(a > b) {\n          return 1 * sort.order;\n        }\n        if(a < b) {\n          return -1 * sort.order;\n        }\n      });\n    }\n    return _sortedMovies;\n  }, [filterQuery, sort, year]);\n\n  const handleFilter = e => {\n    const { name, value } = e.target;\n    setFilterQuery({...filterQuery, [name]: value });\n  };\n\n  const handleSort = (key) => {\n    if (sort.key === key) {\n      setSort({...sort, order: -sort.order });\n    } else {\n      setSort({\n        key: key,\n        order: 1\n      })\n    }\n  };\n\n  const handleChange = (event) => {\n    setYear(event.target.value);\n  }\n\n   return(\n    <div id=\"top\">\n      <div className=\"header\" id=\"header\">\n        <div className=\"header-group\">\n          <div className=\"logo\">\n            <a href=\"\"><img src={logo} alt=\"logo\" /></a>\n          </div>\n          <div className=\"header-link\">\n            <a href=\"\">year</a>\n          </div>\n          <div className=\"header-link\">\n            <a href=\"\">all</a>\n          </div>\n        </div>\n      </div>\n      <div className=\"function\">\n        <div className=\"function-group\">\n          <div className=\"filter\">\n            <Filter\n              handleFilter={handleFilter}\n              filterQuery={filterQuery}\n              className=\"component-filter\"\n            />\n          </div>\n          <div className=\"select function-items\">\n            <Select\n              year={year}\n              handleChange={handleChange}\n              className=\"component-select\"\n            />\n          </div>\n          <div className=\"button function-items\">\n            <Button\n              button={\"income\"}\n              sort={sort}\n              handleSort={handleSort}\n              className=\"component-button\"\n            />\n          </div>\n          <div className=\"function-items\">\n            <a href=\"#top\"><div className=\"header-link\"><img src={arrow} alt=\"arrow\" /></div></a>\n          </div>\n        </div>\n      </div>\n      <div className=\"main\">\n        <div className=\"movielist\">\n          <Movie\n            movies={sortedMovies}\n            max={props.movies[year][\"max\"]}\n            className=\"component-movie\"\n          />\n        </div>\n      </div>\n      <div className=\"footer\">\n      </div>\n    </div>\n\n   );\n}\n\nexport default Sort;\n\n"]},"metadata":{},"sourceType":"module"}